View(ng1)
ng1$SettleDiff <- c(ng4$Settle-ng1$Settle)
View(ng1)
View(ng1[,c(1,5)])
View(ng1)
View(ng1[,c(1,7,10,12)])
View(ng4)
View(ng1)
save.image("~/ng1.csv.RData")
cc <- ng1 %>%  select(Date, SettleDiff) %>%
drop_na()
head(cc)
plot(cc)
melt(cc, id="Date")
ggplot(data=cc,
aes(x=Date,y=SettleDiff, colour=variable)) +
geom_line(aes(linetype=variable)) +
geom_point()
ggplot(data=cc,
aes(x=Date,y=SettleDiff)) +
geom_line() +
geom_point()
#corn vs oil
library(Quandl)
library(lubridate)
library(tidyverse)
#montly diffv
Quandl.api_key("nfJf-LHSL3gtCpXmyuX2")
#pull weekly data for each of the past 13 years
startdate='2011-01-01'
ng1 = Quandl("CHRIS/CME_NG1", collapse = "month", start_date=startdate, order='asc')
ng4 = Quandl("CHRIS/CME_NG4", collapse = "month", start_date=startdate, order='asc')
#pull weekly data for each of the past 13 years
startdate='2012-01-01'
ng1 = Quandl("CHRIS/CME_NG1", collapse = "month", start_date=startdate, order='asc')
ng4 = Quandl("CHRIS/CME_NG4", collapse = "month", start_date=startdate, order='asc')
ng1$ng4Settle <- c(ng4$Settle)
ng1$SettleDiff <- c(ng4$Settle-ng1$Settle)
cc <- ng1 %>%  select(Date, SettleDiff) %>%
drop_na()
head(cc)
View(cc)
ggplot(data=cc,
aes(x=Date,y=SettleDiff)) +
geom_line() +
geom_point()
#pull weekly data for each of the past 13 years
startdate='2015-01-01'
ng1 = Quandl("CHRIS/CME_NG1", collapse = "week", start_date=startdate, order='asc')
ng4 = Quandl("CHRIS/CME_NG4", collapse = "week", start_date=startdate, order='asc')
ng1$ng4Settle <- c(ng4$Settle)
#corn vs oil
library(Quandl)
library(lubridate)
library(tidyverse)
#montly diffv
Quandl.api_key("nfJf-LHSL3gtCpXmyuX2")
#pull weekly data for each of the past 13 years
startdate='2015-01-01'
ng1 = Quandl("CHRIS/CME_NG1", collapse = "week", start_date=startdate, order='asc')
ng4 = Quandl("CHRIS/CME_NG4", collapse = "week", start_date=startdate, order='asc')
ng1$ng4Settle <- c(ng4$Settle)
ng1$SettleDiff <- c(ng4$Settle-ng1$Settle)
cc <- ng1 %>%  select(Date, SettleDiff) %>%
drop_na()
head(cc)
ggplot(data=cc,
aes(x=Date,y=SettleDiff)) +
geom_line() +
geom_point()
library(Quandl)
library(lubridate)
library(tidyverse)
#montly diffv
Quandl.api_key("nfJf-LHSL3gtCpXmyuX2")
#pull weekly data for each of the past 13 years
startdate='2018-01-01'
ng1 = Quandl("CHRIS/CME_NG1", collapse = "day", start_date=startdate, order='asc')
ng1 = Quandl("CHRIS/CME_NG1", collapse = "daily", start_date=startdate, order='asc')
ng2 = Quandl("CHRIS/CME_NG2", collapse = "daily", start_date=startdate, order='asc')
ng3 = Quandl("CHRIS/CME_NG3", collapse = "daily", start_date=startdate, order='asc')
ng4 = Quandl("CHRIS/CME_NG4", collapse = "daily", start_date=startdate, order='asc')
ng5 = Quandl("CHRIS/CME_NG5", collapse = "daily", start_date=startdate, order='asc')
ng6 = Quandl("CHRIS/CME_NG6", collapse = "daily", start_date=startdate, order='asc')
ng7 = Quandl("CHRIS/CME_NG7", collapse = "daily", start_date=startdate, order='asc')
ng8 = Quandl("CHRIS/CME_NG8", collapse = "daily", start_date=startdate, order='asc')
ng9 = Quandl("CHRIS/CME_NG9", collapse = "daily", start_date=startdate, order='asc')
ng10 = Quandl("CHRIS/CME_NG10", collapse = "daily", start_date=startdate, order='asc')
ng11 = Quandl("CHRIS/CME_NG11", collapse = "daily", start_date=startdate, order='asc')
ng12 = Quandl("CHRIS/CME_NG12", collapse = "daily", start_date=startdate, order='asc')
ng1$Settle - ng2$Settle
ng1$Settle - ng2$Settle - ng3$Settle - ng4$Settle
ng1$TotalRollCost <- c(ng4$Settle)
ng1$TotalRollCost <- (ng1$Settle - ng2$Settle) + (ng2$Settle - ng3$Settle) + (ng3$Settle - ng4$Settle) +
(ng4$Settle - ng5$Settle) + (ng5$Settle - ng6$Settle) + (ng6$Settle - ng7$Settle) +
(ng7$Settle - ng8$Settle) + (ng8$Settle - ng9$Settle) + (ng9$Settle - ng10$Settle) +
(ng10$Settle - ng11$Settle) + (ng11$Settle - ng12$Settle)
ng1$TotalRollCost
cc <- ng1 %>%  select(Date, TotalRollCost) %>%
drop_na()
plot(cc)
ggplot(data=cc,
aes(x=Date,y=SettleDiff)) +
geom_line() +
geom_point()
ggplot(data=cc,
aes(x=Date,y=TotalRollCost)) +
geom_line() +
geom_point()
ng1$Ng1Cost <- c(ng1$Settle-ng2$Settle)
ng1$Ng4Cost <- c(ng4$Settle-ng5$Settle)
ng1$Ng6Cost <- c(ng6$Settle-ng7$Settle)
ng1$Ng10Cost <- c(ng10$Settle-ng11$Settle)
ng1$Ng12Cost <- c(ng11$Settle-ng12$Settle)
colnames(ng1)
ng1 %>% select(Date, TotalRollCost, Ng1Cost, Ng4cost, Ng6Cost, Ng10Cost, Ng12Cost)
ng1 %>% select(Date, TotalRollCost, Ng1Cost, Ng4Cost, Ng6Cost, Ng10Cost, Ng12Cost)
ng <- ng1 %>% select(Date, TotalRollCost, Ng1Cost, Ng4Cost, Ng6Cost, Ng10Cost, Ng12Cost)
tail(ng)
View(ng)
#pull weekly data for each of the past 13 years
startdate='2014-01-01'
ng1 = Quandl("CHRIS/CME_NG1", collapse = "weekly", start_date=startdate, order='asc')
ng3 = Quandl("CHRIS/CME_NG3", collapse = "weekly", start_date=startdate, order='asc')
ng2 = Quandl("CHRIS/CME_NG2", collapse = "weekly", start_date=startdate, order='asc')
ng4 = Quandl("CHRIS/CME_NG4", collapse = "weekly", start_date=startdate, order='asc')
ng5 = Quandl("CHRIS/CME_NG5", collapse = "weekly", start_date=startdate, order='asc')
ng6 = Quandl("CHRIS/CME_NG6", collapse = "weekly", start_date=startdate, order='asc')
ng7 = Quandl("CHRIS/CME_NG7", collapse = "weekly", start_date=startdate, order='asc')
ng8 = Quandl("CHRIS/CME_NG8", collapse = "weekly", start_date=startdate, order='asc')
ng9 = Quandl("CHRIS/CME_NG9", collapse = "weekly", start_date=startdate, order='asc')
ng10 = Quandl("CHRIS/CME_NG10", collapse = "weekly", start_date=startdate, order='asc')
ng11 = Quandl("CHRIS/CME_NG11", collapse = "weekly", start_date=startdate, order='asc')
ng12 = Quandl("CHRIS/CME_NG12", collapse = "weekly", start_date=startdate, order='asc')
ng1$TotalRollCost <- (ng1$Settle - ng2$Settle) + (ng2$Settle - ng3$Settle) + (ng3$Settle - ng4$Settle) +
(ng4$Settle - ng5$Settle) + (ng5$Settle - ng6$Settle) + (ng6$Settle - ng7$Settle) +
(ng7$Settle - ng8$Settle) + (ng8$Settle - ng9$Settle) + (ng9$Settle - ng10$Settle) +
(ng10$Settle - ng11$Settle) + (ng11$Settle - ng12$Settle)
cc <- ng1 %>%  select(Date, TotalRollCost) %>%
drop_na()
ggplot(data=cc,
aes(x=Date,y=TotalRollCost)) +
geom_line() +
geom_point()
#corn vs oil
library(Quandl)
library(lubridate)
library(tidyverse)
#montly diffv
Quandl.api_key("nfJf-LHSL3gtCpXmyuX2")
#pull weekly data for each of the past 13 years
startdate='2014-01-01'
ng1 = Quandl("CHRIS/CME_NG1", collapse = "weekly", start_date=startdate, order='asc')
ng2 = Quandl("CHRIS/CME_NG2", collapse = "weekly", start_date=startdate, order='asc')
ng3 = Quandl("CHRIS/CME_NG3", collapse = "weekly", start_date=startdate, order='asc')
ng4 = Quandl("CHRIS/CME_NG4", collapse = "weekly", start_date=startdate, order='asc')
ng5 = Quandl("CHRIS/CME_NG5", collapse = "weekly", start_date=startdate, order='asc')
ng6 = Quandl("CHRIS/CME_NG6", collapse = "weekly", start_date=startdate, order='asc')
ng7 = Quandl("CHRIS/CME_NG7", collapse = "weekly", start_date=startdate, order='asc')
ng8 = Quandl("CHRIS/CME_NG8", collapse = "weekly", start_date=startdate, order='asc')
ng9 = Quandl("CHRIS/CME_NG9", collapse = "weekly", start_date=startdate, order='asc')
ng10 = Quandl("CHRIS/CME_NG10", collapse = "weekly", start_date=startdate, order='asc')
ng11 = Quandl("CHRIS/CME_NG11", collapse = "weekly", start_date=startdate, order='asc')
ng12 = Quandl("CHRIS/CME_NG12", collapse = "weekly", start_date=startdate, order='asc')
ng1$TotalRollCost <- (ng1$Settle - ng2$Settle) + (ng2$Settle - ng3$Settle) + (ng3$Settle - ng4$Settle) +
(ng4$Settle - ng5$Settle) + (ng5$Settle - ng6$Settle) + (ng6$Settle - ng7$Settle) +
(ng7$Settle - ng8$Settle) + (ng8$Settle - ng9$Settle) + (ng9$Settle - ng10$Settle) +
(ng10$Settle - ng11$Settle) + (ng11$Settle - ng12$Settle)
cc <- ng1 %>%  select(Date, TotalRollCost) %>%
drop_na()
ggplot(data=cc,
aes(x=Date,y=TotalRollCost)) +
geom_line() +
geom_point()
library(tidyverse)
library(readr)
library(reshape2)
library(lubridate)
library(odbc)
con <- dbConnect(odbc(),
Driver = "SQL Server",
Server = "IN-SQL01",
Database = "COIN",
UID = "ITReportUser",
PWD = "Computronix1", #rstudioapi::askForPassword(),
Port = 1433)
v <- dbGetQuery(con, "SELECT * FROM vwReportKeyData")
v$SubmittedDate <- as.Date(v$SubmittedDate)
caseorders <- v %>%
select(SubmittedDate, OrderCaseTotal, Brand, ProductLine, Overlay) %>%
filter(OrderCaseTotal > 0) %>%
filter(OrderCaseTotal != "NULL") %>%
filter(year(SubmittedDate) == 2020) %>%
mutate(OrderCaseTotal = as.integer(OrderCaseTotal)) %>%
mutate(weekNo = case_when(is.na(SubmittedDate) ~ 99, TRUE ~ isoweek(SubmittedDate)))
weeklyCases <- caseorders %>%
group_by(weekNo, Brand) %>%
summarise(Cases = sum(OrderCaseTotal))
weeklyCases %>% ggplot(aes(weekNo, Cases), color=Brand) +
geom_bar(stat="identity")
source('~/R/WeeklyCases.R', echo=TRUE)
View(weeklyCases)
View(caseorders)
View(weeklyCases)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
weekdayCases <- caseorders %>%
group_by(weekDay, weekNo) %>%
summarise(Cases = sum(OrderCaseTotal))
weekdayCases %>% ggplot(aes(weekNo, Cases), color=Brand) +
geom_bar(stat="identity")
weeklyCases <- caseorders %>%
group_by(weekNo, Brand) %>%
summarise(Cases = sum(OrderCaseTotal))
weeklyCases %>% ggplot(aes(weekNo, Cases), color=Brand) +
geom_bar(stat="identity")
weeklyCases %>% ggplot(aes(weekNo, Cases), fill=Brand) +
geom_bar(stat="identity")
weeklyCases %>% ggplot(aes(weekNo, Cases), fill=Brand) +
geom_bar(stat="identity")
weeklyCases %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity")
ggplot(weeklyCases, aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity")
ggplot(weeklyCases, aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity")
weeklyCases <- caseorders %>%
group_by(weekNo, Brand) %>%
summarise(Cases = sum(OrderCaseTotal), CaseTotal = sum(OrderCaseTotal))
weeklyCases %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity")
weeklyCases %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseTotal))
colnames(caseorders)
v
colnames(v)
caseorders <- v %>%
select(SubmittedDate, OrderCaseTotal, AdjustPrice, OrderTotal, Brand, ProductLine, Overlay) %>%
filter(OrderCaseTotal > 0) %>%
filter(OrderCaseTotal != "NULL") %>%
filter(year(SubmittedDate) == 2020) %>%
mutate(OrderCaseTotal = as.integer(OrderCaseTotal)) %>%
mutate(weekNo = case_when(is.na(SubmittedDate) ~ 99, TRUE ~ isoweek(SubmittedDate))) %>%
mutate(NetPrice = OrderTotal + AdjustPrice)
weeklyCases <- caseorders %>%
group_by(weekNo, Brand) %>%
summarise(Cases = sum(OrderCaseTotal), CaseAverage = mean(NetPrice))
weeklyCases %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage))
View(weeklyCases)
caseorders <- v %>%
select(SubmittedDate, OrderCaseTotal, AdjustPrice, OrderTotal, Brand, ProductLine, Overlay) %>%
filter(OrderCaseTotal > 0) %>%
filter(OrderCaseTotal != "NULL") %>%
filter(year(SubmittedDate) == 2020) %>%
mutate(OrderCaseTotal = as.integer(OrderCaseTotal)) %>%
mutate(weekNo = case_when(is.na(SubmittedDate) ~ 99, TRUE ~ isoweek(SubmittedDate))) %>%
mutate_if(is.numeric, funs(ifelse(is.na(.), 0, .))) %>%
mutate(NetPrice = OrderTotal + AdjustPrice)
caseorders <- v %>%
select(SubmittedDate, OrderCaseTotal, AdjustPrice, OrderTotal, Brand, ProductLine, Overlay) %>%
filter(OrderCaseTotal > 0) %>%
filter(OrderCaseTotal != "NULL") %>%
filter(year(SubmittedDate) == 2020) %>%
mutate(OrderCaseTotal = as.integer(OrderCaseTotal)) %>%
mutate(weekNo = case_when(is.na(SubmittedDate) ~ 99, TRUE ~ isoweek(SubmittedDate))) %>%
mutate_if(is.numeric, funs(ifelse(is.na(.), 0, .))) %>%
mutate(NetPrice = OrderTotal + AdjustPrice)
weeklyCases <- caseorders %>%
group_by(weekNo, Brand) %>%
summarise(Cases = sum(OrderCaseTotal), CaseAverage = mean(NetPrice))
View(weeklyCases)
weeklyCases <- caseorders %>%
group_by(weekNo, Brand) %>%
summarise(Cases = sum(OrderCaseTotal), CaseAverage = mean(NetPrice)/sum(OrderCaseTotal))
weeklyCases %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage))
View(weeklyCases)
weeklyCases <- caseorders %>%
group_by(weekNo, Brand) %>%
summarise(Cases = sum(OrderCaseTotal), CaseAverage = sum(NetPrice)/sum(OrderCaseTotal))
View(weeklyCases)
weeklyCases %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage))
weeklyCases %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, fill=Brand))
weeklyCases %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand))
weeklyBrand <- caseorders %>%
group_by(weekNo, Brand) %>%
summarise(Cases = sum(OrderCaseTotal), CaseAverage = sum(NetPrice)/sum(OrderCaseTotal))
weeklyAll <- caseorders %>%
group_by(weekNo) %>%
summarise(Cases = sum(OrderCaseTotal), CaseAverage = sum(NetPrice)/sum(OrderCaseTotal))
weeklyBrand %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand))
weeklyBrand %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand))
weeklyBrand %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand)) +
geom_line(weeklyAll, aes(weekNo, CaseAverage))
ggplot(weeklyAll, aes(weekNo, CaseAverage)) +
geom_line()
weeklyBrand %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand)) +
geom_line(weeklyAll, aes(weekNo, CaseAverage))
weeklyBrand %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand))
ggplot() +
geom_line(weeklyAll, aes(weekNo, CaseAverage))
ggplot(weeklyAll) +
geom_line(aes(weekNo, CaseAverage))
weeklyBrand %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand))
weeklyBrand %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand)) +
geom_line(aes(weekNo, weeklyAll$CaseAverage))
weeklyBrand %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand)) +
geom_line(aes(weeklyAll$weekNo, weeklyAll$CaseAverage))
weeklyAll <- caseorders %>%
group_by(weekNo) %>%
mutate(Brand = "Both") %>%
summarise(Cases = sum(OrderCaseTotal), CaseAverage = sum(NetPrice)/sum(OrderCaseTotal))
weeklyBoth <- caseorders %>%
group_by(weekNo) %>%
mutate(Brand = "Both") %>%
summarise(Cases = sum(OrderCaseTotal), CaseAverage = sum(NetPrice)/sum(OrderCaseTotal))
weeklyAll <- rbind(weeklyBrand, weeklyBoth)
colnames(weeklyBrand)
colnames(weeklyBoth)
weeklyBoth <- caseorders %>%
group_by(weekNo) %>%
mutate(Brand = "Both") %>%
summarise(Cases = sum(OrderCaseTotal), CaseAverage = sum(NetPrice)/sum(OrderCaseTotal))
colnames(weeklyBoth)
weeklyBoth <- caseorders %>%
group_by(weekNo) %>%
summarise(Cases = sum(OrderCaseTotal), CaseAverage = sum(NetPrice)/sum(OrderCaseTotal)) %>%
mutate(Brand = "Both")
colnames(weeklyBoth)
weeklyAll <- rbind(weeklyBrand, weeklyBoth)
View(weeklyAll)
weeklyAll <- union_all(weeklyBrand, weeklyBoth)
View(weeklyAll)
weeklyAll %>% ggplot(aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand))
ggplot(weeklyBoth, aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(weeklyBoth,aes(weekNo, CaseAverage, color=Brand))
ggplot(weeklyBoth, aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand))
ggplot(weeklyBrand, aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand))
ggplot(weeklyBrand, aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand)) +
geom_line(data=weeklyBoth, aes(weekNo, CaseAverage))
ggplot(weeklyBrand, aes(weekNo, Cases, fill=Brand)) +
geom_bar(stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand)) +
geom_line(data=weeklyBoth, aes(weekNo, CaseAverage))
ggplot(weeklyBrand) +
geom_bar(aes(weekNo, Cases, fill=Brand), stat="identity") +
geom_line(aes(weekNo, CaseAverage, color=Brand)) +
geom_line(data=weeklyBoth, aes(weekNo, CaseAverage))
source('~/R/WeeklyCases.R', echo=TRUE)
#weekday cases
caseorders <- v %>%
select(SubmittedDate, OrderCaseTotal, Brand, ProductLine, Overlay) %>%
filter(OrderCaseTotal > 0) %>%
filter(OrderCaseTotal != "NULL") %>%
filter(year(SubmittedDate) == 2020) %>%
mutate(OrderCaseTotal = as.integer(OrderCaseTotal)) %>%
mutate(weekDay = weekdays(SubmittedDate)) %>%
mutate(weekNo = isoweek(SubmittedDate))
weekdayCases <- caseorders %>%
group_by(weekDay, weekNo) %>%
summarise(Cases = sum(OrderCaseTotal))
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
weeklyBrand
View(weeklyBrand)
View(caseorders)
View(filter(caseorders, Brand == 'Greenfield' & weekNo = 16)
View(filter(caseorders, Brand == 'Greenfield' & weekNo == 16)
)
colnames(v)
caseorders <- v %>%
select(JobNumber, SubmittedDate, OrderCaseTotal, AdjustPrice, OrderTotal, Brand, ProductLine, Overlay) %>%
filter(OrderCaseTotal > 0) %>%
filter(OrderCaseTotal != "NULL") %>%
filter(year(SubmittedDate) == 2020) %>%
mutate(OrderCaseTotal = as.integer(OrderCaseTotal)) %>%
mutate(weekNo = case_when(is.na(SubmittedDate) ~ 99, TRUE ~ isoweek(SubmittedDate))) %>%
mutate_if(is.numeric, funs(ifelse(is.na(.), 0, .))) %>%
mutate(NetPrice = OrderTotal + AdjustPrice)
View(filter(caseorders, Brand == 'Greenfield' & weekNo == 16)
)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('~/R/WeeklyCases.R', echo=TRUE)
source('C:/Users/aborst/R-Scripts/A_WeeklyCasesGraph.R', echo=TRUE)
# analyze ugaz
# 1. Does UGAZ lose more value during rollover period
library(tidyverse)
library(lubridate)
getwd()
dir
ls
list.files()
getwd()
setwd("C:/Users/aborst/R-SCRIPTS/ugaz")
a <- readr::read_csv('UGAZ.csv')
a %>% select(Date, Close)
