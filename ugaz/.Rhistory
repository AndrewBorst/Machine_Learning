install.packages(tidyverse)
install.packages('tidyverse')
install.packages('QUANDL')
readr::read_csv('UGAZ.csv')
a <- readr::read_csv('UGAZ.csv')
a
View(a)
colnames(a)
# analyze ugaz
# 1. Does UGAZ lose more value during rollover period?
library(skimr)
library(lubridate)
library(tidymodels)
setwd("C:/Users/My Surface/Documents/R-SCRIPTS/ugaz")
period1 <- cbind(1,2,3,4,5,6,7,8,9,10)
period2 <- cbind(11,12,13,14,15,16,17,18,19,20)
#downloaded data from yahoo, daily for last year
a <- readr::read_csv('UGAZ.csv')
a2018 <- readr::read_csv('UGAZMarch2018-2019.csv')
b <- a %>%
mutate(closeDiff = Close - lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "third"
))
skim(b)
b %>% group_by(period)  %>%
summarize(summedDiff = sum(closeDiff))
g <- b %>% group_by(period)  %>%
summarize(summedDiff = sum(closeDiff))
skim(g)
g
g <- b %>% group_by(period)  %>%
summarize(summedDiff = sum(closeDiff), mean_diff = mean(closeDiff))
g
union_all(b, b2018) %>% group_by(period)  %>%
summarize(summedDiff = sum(closeDiff), mean_diff = mean(closeDiff))
a2018 <- readr::read_csv('UGAZMarch2018-2019.csv')
b <- a %>%
mutate(closeDiff = Close - lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "third"
))
b2018 <- a2018 %>%
mutate(closeDiff = Close - lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "third"
))
b2018 %>% group_by(period)  %>%
summarize(summedDiff = sum(closeDiff), mean_diff = mean(closeDiff))
b2018 %>% group_by(period)  %>%
summarize(summedDiff = sum(closeDiff), mean_diff = mean(closeDiff))
source('~/R-Scripts/ugaz/ugaz.R', echo=TRUE)
b
b <- a %>%
mutate(closeDiff = (Close - lag(Close))lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "third"
))
b <- a %>%
mutate(closeDiff = (Close - lag(Close))/lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "third"
))
skim(b)
skim(filter(b,period=="first"))
u
union_all(b, b2018) %>% group_by(period)  %>%
summarize(summedDiff = sum(closeDiff), mean_diff = mean(closeDiff))
union_all(b, b2018) %>% group_by(period)  %>%
summarize(summedDiff = sum(closeDiff), mean_diff = mean(closeDiff))
b
b2018 <- a2018 %>%
mutate(closeDiff = Close - lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "third"
))
b2018 <- a2018 %>%
mutate(closeDiff = Close - lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "third"))
b2018 %>% group_by(period)  %>%
summarize(summedDiff = sum(closeDiff), mean_diff = mean(closeDiff))
b2018 %>% group_by(period)  %>%
summarize(summedDiff = sum(closeDiff), mean_diff = mean(closeDiff))
b2018 <- a2018 %>%
mutate(closeDiff = (Close - lag(Close))/lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "third"))
b2018 %>% group_by(period)  %>%
summarize(summedDiff = sum(closeDiff), mean_diff = mean(closeDiff))
union_all(b, b2018) %>% group_by(period)  %>%
summarize(summedDiff = sum(closeDiff), mean_diff = mean(closeDiff))
