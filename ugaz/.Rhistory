source('C:/Users/aborst/R-Scripts/A_WeeklyCasesGraph.R', echo=TRUE)
source('C:/Users/aborst/R-Scripts/A_WeeklyCasesGraph.R', echo=TRUE)
# analyze ugaz
# 1. Does UGAZ lose more value during rollover period?
library(skimr)
library(lubridate)
library(tidymodels)
# analyze ugaz
# 1. Does UGAZ lose more value during rollover period?
library(skimr)
library(lubridate)
library(tidymodels)
#setwd("C:/Users/My Surface/Documents/R-SCRIPTS/ugaz")
setwd("C:/Users/aborst/R-SCRIPTS/ugaz")
period1 <- cbind(1,2,3,4,5,6,7,8,9,10)
install.packages("tidymodels")
install.packages("tidymodels")
#setwd("C:/Users/My Surface/Documents/R-SCRIPTS/ugaz")
setwd("C:/Users/aborst/R-SCRIPTS/ugaz")
period1 <- cbind(1,2,3,4,5,6,7,8,9,10)
period2 <- cbind(11,12,13,14,15,16,17,18,19,20)
#downloaded data from yahoo, daily for last year
a <- readr::read_csv('UGAZ.csv')
a2018 <- readr::read_csv('UGAZMarch2018-2019.csv')
b <- a %>%
mutate(closeDiff = Close - lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "third"
)) %>%
mutate
# analyze ugaz
# 1. Does UGAZ lose more value during rollover period?
library(skimr)
library(lubridate)
library(tidymodels)
#setwd("C:/Users/My Surface/Documents/R-SCRIPTS/ugaz")
setwd("C:/Users/aborst/R-SCRIPTS/ugaz")
period1 <- cbind(1,2,3,4,5,6,7,8,9,10)
period2 <- cbind(11,12,13,14,15,16,17,18,19,20)
#downloaded data from yahoo, daily for last year
a <- readr::read_csv('UGAZ.csv')
a2018 <- readr::read_csv('UGAZMarch2018-2019.csv')
b <- a %>%
mutate(closeDiff = Close - lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "third"
)) %>%
mutate
skim(b)
# analyze ugaz
# 1. Does UGAZ lose more value during rollover period?
library(skimr)
library(lubridate)
skim(b)
install.packages("skimr")
# analyze ugaz
# 1. Does UGAZ lose more value during rollover period?
library(skimr)
skim(b)
?mutate_if
b <- a %>%
mutate(closeDiff = Close - lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "third"
)) %>%
mutate_if(is.character(), as.factor())
skim(b)
b <- a %>%
mutate(closeDiff = Close - lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "third"
)) %>%
mutate_if(is.character(), as.factor())
b <- a %>%
mutate(closeDiff = Close - lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "third"
)) %>%
mutate_if(is.character, as.factor)
skim(b)
lmmodel <- linear_reg() %>%
set_engine("lm") %>%
fit(closeDiff~period,data=b)
tidy(lmmodel)
mtcars
head(mtcars)
t_test(closeDiff ~ period, order=c("first", "second", "third"), alternative = "less")
b %>% t_test(closeDiff ~ period, order=c("first", "second", "third"), alternative = "less")
b <- a %>%
mutate(closeDiff = Close - lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "second"
)) %>%
mutate_if(is.character, as.factor)
b %>% t_test(closeDiff ~ period, order=c("first", "second"), alternative = "less")
b <- a %>%
mutate(closeDiff = Close - lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period_group = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "second"
)) %>%
mutate_if(is.character, as.factor)
b %>% ggplot(filter(period_group=="first"), aes(groupDiff))
b %>% ggplot(filter(period_group=="first"), aes(groupDiff))
b <- a %>%
mutate(closeDiff = Close - lag(Close), dayNo = day(Date)) %>%
select(Date, dayNo, closeDiff) %>%
na.omit() %>%
mutate(period_group = case_when(dayNo %in% period1 ~ "first",
dayNo %in% period2 ~ "second",
TRUE ~ "second"
)) %>%
mutate_if(is.character, as.factor)
skim(b)
tidy(lmmodel)
b %>% ggplot(filter(period_group=="first"), aes(groupDiff))
colnames(b)
b %>% filter(period_group=="first")
b %>% filter(period_group=="first") %>%
ggplot(aes(groupDiff))
b %>% filter(period_group=="first") %>%
ggplot() +
geom_histogram(aes(groupDiff))
b %>% filter(period_group=="first") %>%
ggplot()
b %>% filter(period_group=="first") %>%
ggplot(filter(b,period_group=="first"))
b %>% filter(period_group=="first") %>%
ggplot(filter(b,period_group=="first")) +
geom_histogram(aes(groupDiff))
b %>% filter(period_group=="first") %>%
ggplot(filter(b,period_group=="first"), aes(groupDiff)) +
geom_histogram()
b %>% filter(period_group=="first") %>%
qplot(groupDiff, geom = "histogram")
b %>% filter(period_group=="first") %>%
qplot(closeDiff, geom = "histogram")
filter(period_group=="first")
b %>% filter(period_group=="first")
b %>% filter(period_group=="first") %>%
qplot(closeDiff, geom = "histogram")
c <-   b %>% filter(period_group=="first") %>%
qplot(c$closeDiff, geom = "histogram")
c <-   b %>% filter(period_group=="first") %>%
qplot(c$closeDiff, geom = "histogram")
c$closeDiff
b
c <-  b %>% filter(period_group=="first")
qplot(c$closeDiff, geom = "histogram")
b %>%
qplot(c$closeDiff, geom = "histogram") +
facet_wrap(period)
b %>%
qplot(c$closeDiff, geom = "histogram") +
facet_wrap(period_group)
b %>%
qplot(closeDiff, geom = "histogram") +
facet_wrap(period_group)
b %>%
ggplot(aes(closeDiff)) +
geom_histogram() +
facet_wrap(period_group)
b %>%
ggplot(aes(closeDiff)) +
geom_histogram() +
facet_wrap( ~ period_group)
